{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nexport async function getData(searchWord, page, limit) {\n  const searchParams = new URLSearchParams({\n    key: '44412279-8977454442245f14893e5bf31',\n    q: searchWord,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n    page,\n  });\n  const fetchUsers = async () => {\n    const response = await axios.get(\n      `https://pixabay.com/api/?${searchParams}`\n    );\n    return response.data;\n  };\n\n  return fetchUsers();\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet galleryBoxes = 'firstload';\n\nexport async function renderGallery(data) {\n  const renderBox = document.querySelector('.gallery');\n\n  const postsArray = data.hits;\n\n  let galleryBox = '';\n\n  postsArray.forEach(item => {\n    galleryBox += `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${item.webformatURL}\"\n          alt=\"${item.tags}\"\n          title=\"${item.tags}\"\n        />\n      \n      <ul>\n        <li><h5>Likes</h5><span>${item.likes}</span></li>\n        <li><h5>Views</h5><span>${item.views}</span></li>\n        <li><h5>Comments</h5><span>${item.comments}</span></li>\n        <li><h5>Downloads</h5><span>${item.downloads}</span></li>\n      </ul>\n      </a>\n    </li>\n  `;\n  });\n  renderBox.insertAdjacentHTML('beforeend', galleryBox);\n\n  if (galleryBoxes !== 'firstload') galleryBoxes.destroy();\n  galleryBoxes = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n  });\n}\n\nexport function clearRender() {\n  const renderBox = document.querySelector('.gallery');\n  renderBox.innerHTML = '';\n}\n","import * as search from './js/pixabay-api';\nimport { renderGallery, clearRender } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst morePostsBtn = document.querySelector('.btn');\nlet userSearch;\nlet page = 1;\nlet limit = 15;\nlet size = {};\nlet totalPages;\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const userSearchRequest = event.target.elements.search.value;\n  if (userSearchRequest === '' || /^\\s*$/.test(userSearchRequest)) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Empty request',\n    });\n    event.target.elements.search.value = '';\n    return;\n  }\n  loader.classList.remove('hide');\n  morePostsBtn.classList.add('hide');\n  clearRender();\n  page = 1;\n  search\n    .getData(userSearchRequest.trim(), page, limit)\n    .then(posts => {\n      checkAndRender(posts);\n    })\n    .catch(error => {\n      iziToast.error({\n        title: 'Error',\n        message: error,\n      });\n    });\n  event.target.elements.search.value = '';\n  userSearch = userSearchRequest.trim();\n});\n\nmorePostsBtn.addEventListener('click', () => {\n  if (page > totalPages) {\n    morePostsBtn.classList.add('hide');\n    return iziToast.error({\n      position: 'topRight',\n      message: \"We're sorry, there are no more posts to load\",\n    });\n  }\n\n  page += 1;\n\n  if (page > 1) {\n    loader.classList.remove('hide');\n    morePostsBtn.classList.add('hide');\n    let galleryItemSize = document.querySelectorAll('.gallery-item');\n    size = galleryItemSize[0].getBoundingClientRect();\n    search\n      .getData(userSearch, page, limit)\n      .then(posts => {\n        checkAndRender(posts);\n      })\n      .catch(error => {\n        iziToast.error({\n          title: 'Error',\n          message: error,\n        });\n      });\n  }\n});\n\nfunction checkAndRender(posts) {\n  if (posts.hits.length === 0 || posts.hits === 'undefined') {\n    loader.classList.add('hide');\n    return iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n\n  renderGallery(posts).then(() => {\n    if (size.height) {\n      window.scrollBy({\n        top: size.height * 3, // зробив спеціально на 3 рядка\n        behavior: 'smooth',\n      });\n    }\n    totalPages = Math.ceil(posts.totalHits / limit);\n  });\n  loader.classList.add('hide');\n  morePostsBtn.classList.remove('hide');\n}\n"],"names":["getData","searchWord","page","limit","searchParams","axios","galleryBoxes","renderGallery","data","renderBox","postsArray","galleryBox","item","SimpleLightbox","clearRender","form","loader","morePostsBtn","userSearch","size","totalPages","event","userSearchRequest","iziToast","search\n    .getData","posts","checkAndRender","error","search\n      .getData"],"mappings":"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"}