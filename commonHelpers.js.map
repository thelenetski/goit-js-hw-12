{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport async function renderGallery(data) {\n  const renderBox = document.querySelector('.gallery');\n\n  const postsArray = data.hits;\n\n  let galleryBox = '';\n\n  postsArray.forEach(item => {\n    galleryBox += `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${item.webformatURL}\"\n          alt=\"${item.tags}\"\n          title=\"${item.tags}\"\n        />\n      \n      <ul>\n        <li><h5>Likes</h5><span>${item.likes}</span></li>\n        <li><h5>Views</h5><span>${item.views}</span></li>\n        <li><h5>Comments</h5><span>${item.comments}</span></li>\n        <li><h5>Downloads</h5><span>${item.downloads}</span></li>\n      </ul>\n      </a>\n    </li>\n  `;\n  });\n  renderBox.insertAdjacentHTML('beforeend', galleryBox);\n\n  let galleryBoxes = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n  });\n\n  galleryBoxes.refresh();\n}\n\nexport function clearRender() {\n  const renderBox = document.querySelector('.gallery');\n  renderBox.innerHTML = '';\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\nimport { renderGallery } from './render-functions';\n\nexport function getData(searchWord, ...rest) {\n  let [loader, page, morePostsBtn, size = {}, limit] = [...rest];\n\n  const searchParams = new URLSearchParams({\n    key: '44412279-8977454442245f14893e5bf31',\n    q: searchWord,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n    page,\n  });\n  const fetchUsers = async () => {\n    const response = await axios.get(\n      `https://pixabay.com/api/?${searchParams}`\n    );\n    return response.data;\n  };\n\n  fetchUsers()\n    .then(posts => {\n      if (posts.hits.length === 0 || posts.hits === 'undefined') {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      }\n      renderGallery(posts).then(() => {\n        if (size.height) {\n          window.scrollBy({\n            top: size.height * 2,\n            behavior: 'smooth',\n          });\n        }\n      });\n      loader.classList.add('hide');\n      morePostsBtn.classList.remove('hide');\n    })\n    .catch(error => {\n      iziToast.error({\n        title: 'Error',\n        message: error,\n      });\n    });\n}\n","import * as search from './js/pixabay-api';\nimport { clearRender } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst morePostsBtn = document.querySelector('.btn');\nlet userSearch;\nlet page = 1;\nlet limit = 15;\nlet size = 0;\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const userSearchRequest = event.target.elements.search.value;\n  if (userSearchRequest === '' || /^\\s*$/.test(userSearchRequest)) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Empty request',\n    });\n    event.target.elements.search.value = '';\n    return;\n  }\n  loader.classList.remove('hide');\n  morePostsBtn.classList.add('hide');\n  clearRender();\n  page = 1;\n  search.getData(userSearchRequest.trim(), loader, page, morePostsBtn, limit);\n  event.target.elements.search.value = '';\n  userSearch = userSearchRequest.trim();\n});\n\nmorePostsBtn.addEventListener('click', () => {\n  const totalPages = Math.ceil(100 / limit);\n\n  if (page > totalPages) {\n    morePostsBtn.classList.add('hide');\n    return iziToast.error({\n      position: 'topRight',\n      message: \"We're sorry, there are no more posts to load\",\n    });\n  }\n\n  page += 1;\n\n  if (page > 1) {\n    loader.classList.remove('hide');\n    morePostsBtn.classList.add('hide');\n    let galleryItemSize = document.querySelectorAll('.gallery-item');\n    size = galleryItemSize[0].getBoundingClientRect();\n    search.getData(userSearch, loader, page, morePostsBtn, size, limit);\n  }\n});\n"],"names":["renderGallery","data","renderBox","postsArray","galleryBox","item","SimpleLightbox","clearRender","getData","searchWord","rest","loader","page","morePostsBtn","size","limit","searchParams","axios","posts","iziToast","error","form","userSearch","event","userSearchRequest","search.getData","totalPages"],"mappings":"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"}